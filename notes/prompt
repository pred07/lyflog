ntiGravity Automation Prompt â€” Google SSO Parity Check

Objective
Automatically verify that Google SSO users are real users (not demo) and that custom metrics persist correctly across refresh and navigation.

Context
The app has:

A demo/test account with preloaded metrics

Google SSO for real users
Bug suspected: demo fallback overriding real SSO users.

ğŸ”¹ What AntiGravity should simulate

Fresh Google SSO User Session

Simulate login using Google SSO

Treat this as a first-time user (no existing Firestore doc)

Auth Verification

Capture and log:

Firebase Auth UID

Email

Assert:

UID is non-null

Session remains stable across navigation

Firestore Mapping Check

Verify Firestore document is created at:

users/{auth.uid}

Assert:

No fallback to hardcoded/demo user IDs

No username/email-based document keys

Custom Metric Persistence Test

Navigate to Profile

Add a custom metric (e.g., â€œAnxietyâ€)

Assert immediately:

Metric appears in Profile state

Metric appears in Dashboard

Metric appears in Trends

Hard Refresh Validation

Perform full page reload

Rehydrate auth + user state

Assert:

Same UID is active

Metric still exists

No demo data injected

Navigation Consistency

Move across:

Profile â†’ Dashboard â†’ Trends â†’ Timeline

Assert:

Active UID unchanged

Metrics list consistent everywhere

Demo Isolation Assertion

Ensure demo-only logic (checkTestAccount, mock data loaders) is:

Not executed

Not referenced

Fail test immediately if demo logic runs post-SSO

ğŸ”¹ Invariants AntiGravity must enforce

Invariant 1
If auth.uid exists â†’ demo fallback is forbidden.

Invariant 2
Firestore user doc ID must always equal auth.uid.

Invariant 3
Custom metrics created by a user must survive:

refresh

navigation

state rehydration

ğŸ”¹ Output expected from AntiGravity

Pass / Fail report

If fail:

Exact step where demo override occurs

File / logic path responsible

Confirmation that:

Google SSO users have full feature parity with admin/demo users

ğŸ§  Why this works

You are converting:

âŒ manual trust

âŒ UI-based guessing

into:

âœ… auth invariants

âœ… data ownership guarantees

This is exactly how mature systems are tested.

ğŸš¨ One extra (strongly recommended)

Ask AntiGravity to add a temporary runtime badge:

DEMO MODE

GOOGLE SSO MODE

Visible in the UI footer or header.

This makes silent fallback bugs impossible to miss.

Final clarity

âœ” Yes, this can be fully automated

âœ” AntiGravity is the right tool

âœ” This is a logic bug, not Firebase

âœ” Once fixed, it wonâ€™t return if invariants are enforced